### Svom Rest workbench - StationTomcat - Some useful tips.

September 2015 - Jean-Paul Le FÃ¨vre <jean-paul.lefevre@cea.fr> - CEA Irfu

This software is governed by the
[CeCILL license](http://www.cecill.info/index.en.html)

#### More documentation

More [documentation](https://drf-gitlab.cea.fr/lefevre/jplf/wikis/station-tomcat.md) is available.
See also [StationService](https://drf-gitlab.cea.fr/lefevre/jplf/wikis/station-service.md)

Jersey : [getting started](https://jersey.java.net/documentation/latest/getting-started.html#new-webapp)
with a new web application.

#### Initialization

This version is based on the Apache Tomcat servlet container.
````
mvn archetype:generate -DarchetypeArtifactId=jersey-quickstart-webapp \  
-DarchetypeGroupId=org.glassfish.jersey.archetypes -DinteractiveMode=false \  
-DgroupId=org.svom -DartifactId=station-tomcat \  
-Dpackage=org.svom.stations.webapp \  
-DarchetypeVersion=2.21
````

Then to rebuild the application :
```
mvn clean install
```


The configuration is defined in the file *web.xml* located in the directory *src/main/webapp/WEB-INF*

#### Swagger
To take advantage of the documentation generated by Swagger follow 
this [guideline](https://github.com/swagger-api/swagger-core/wiki/Swagger-Core-JAX-RS-Project-Setup-1.5.X)

#### SSL

See also the local Tomcat server configuration: *tomcat/conf/server.xml* and this 
[SSL howto](https://tomcat.apache.org/tomcat-8.0-doc/ssl-howto.html#Configuration)

Nice to have : `export KPW=password`

To see the list of certificates in the keystore run : `keytool -list -storepass $KPW`

To remove a certificate try : `keytool -delete -alias tomcat -storepass $KPW`

To generate a fresh new one for the `localhost` server : `keytool -genkey -alias tomcat -keyalg RSA -keypass $KPW -storepass $KPW`

To export the Tomcat certificate use : `keytool -export -alias tomcat -storepass $KPW -file rest-server.crt`

To see the content : `keytool -printcert -file rest-server.crt`

To convert from `.crt` to `.pem` : `openssl x509 -inform der -in rest-server.crt -out rest-server.pem`

